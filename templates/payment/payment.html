<!doctype html>
<html>

<head>
    <title>Checkout Demo</title>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>

<body>

<button id="btnSubmit">Proceed to Pay</button>

<script type="text/javascript">
    $(document).ready(function () {
        $("#btnSubmit").on("click", function (e) {
            e.preventDefault();

            // Payment request data (replace with your server-side values)
            var options = {
                "key": "{{ razorpay_key_id }}", // Replace with your Razorpay Key ID
                "amount": "{{ consumer_data.total_amount * 100 }}", // Amount in paise (e.g., â‚¹100 = 10000 paise)
                "currency": "INR",
                "name": "Your Company Name",
                "description": "Test Transaction",
                "image": "https://your-logo-url.com/logo.png", // Replace with your logo URL
                "order_id": "{{ consumer_data.order_id }}", // Order ID generated by Razorpay
                "handler": function (response) {
                    // Success callback
                    console.log(response);
                    alert("Payment Successful: " + response.razorpay_payment_id);
                    // Optionally send the payment ID to your server for verification
                    $.post("/payment/verify/", {
                        payment_id: response.razorpay_payment_id,
                        order_id: response.razorpay_order_id,
                        signature: response.razorpay_signature
                    }).done(function (data) {
                        alert("Payment verified successfully.");
                    }).fail(function () {
                        alert("Payment verification failed.");
                    });
                },
                "prefill": {
                    "name": "{{ consumer_data.name }}", // Replace with consumer's name
                    "email": "{{ consumer_data.email }}", // Replace with consumer's email
                    "contact": "{{ consumer_data.phone }}" // Replace with consumer's phone
                },
                "theme": {
                    "color": "#45beaa"
                }
            };

            var rzp1 = new Razorpay(options);
            rzp1.open();
        });
    });
</script>

</body>

</html>
